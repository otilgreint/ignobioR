devtools::install()
install.packages("roxygen2")
library(roxygen2)
#' @export
ignorance_map_mod <- function(...) { ... }
library(devtools)
document()
remove.packages("ignobioR")
devtools::load_all(".")
devtools::install(".")
devtools::document()
data(floratus) # or your real dataset
data(park)     # study site polygon
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
remove.packages("ignobioR")
devtools::document()
devtools::load_all(".")
rm(list = c("ignorance_map_mod"))
devtools::load_all(".")
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
data(floratus) # or your real dataset
data(park)     # study site polygon
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
remove.packages("ignobioR")
remove.packages("ignobioR")
library(ignobioR)
devtools::load_all(".")
devtools::document()
data(floratus) # or your real dataset
data(park)     # study site polygon
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
devtools::load_all(".")
data(floratus) # or your real dataset
data(park)     # study site polygon
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
devtools::load_all(".")
data(floratus) # or your real dataset
data(park)     # study site polygon
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
rm(list = c("ignorance_map_mod"))
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
Ã¹
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
sf::st_crs(park)
sf::st_crs(floratus)  # after converting to sf
library(sf)
# Convert floratus to sf and assign CRS
floratus_sf <- sf::st_as_sf(floratus, coords = c("Long", "Lat"), crs = 4326)
result <- ignorance_map_mod(
data_flor = floratus_sf,
site = park,
tau = 20,
cellsize = 2000
)
floratus_sf <- sf::st_as_sf(floratus, coords = c("Long", "Lat"), crs = 4326, remove = FALSE)
result <- ignorance_map_mod(
data_flor = floratus_sf,
site = park,
tau = 20,
cellsize = 2000
)
library(sf)
# Load original data
load("data/floratus.rda")  # or read.csv if not in package
# Convert to sf
floratus <- sf::st_as_sf(floratus, coords = c("Long", "Lat"), crs = 4326, remove = FALSE)
# Save it back to the package dataset
usethis::use_data(floratus, overwrite = TRUE)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
floratus_sf <- sf::st_as_sf(floratus, coords = c("Long", "Lat"), crs = 4326, remove = FALSE)
result <- ignorance_map_mod(
data_flor = floratus_sf,
site = park,
tau = 20,
cellsize = 2000
)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
result <- ignorance_map_mod(
data_flor = floratus_sf,
site = park,
tau = 20,
cellsize = 2000
)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
result <- ignorance_map_mod(
data_flor = floratus_sf,
site = park,
tau = 20,
cellsize = 2000
)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
result <- ignorance_map_mod(
data_flor = floratus_sf,
site = park,
tau = 20,
cellsize = 2000
)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
result <- ignorance_map_mod(
data_flor = floratus_sf,
site = park,
tau = 20,
cellsize = 2000
)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
result <- ignorance_map_mod(
data_flor = floratus_sf,
site = park,
tau = 20,
cellsize = 2000
)
View(result)
mrfi
MRFI
plot(MRFI)
# Plot the MRFI raster
terra::plot(result$MRFI, main = "Map of Relative Floristic Ignorance (MRFI)")
# Plot species richness
terra::plot(result$RICH, main = "Species Richness (RICH)")
library(ggplot2)
mrfi_df <- as.data.frame(mrfi$MRFI, xy = TRUE)
devtools::document()  # regenerate NAMESPACE and docs
devtools::load_all(".")
result <- ignorance_map_mod(
data_flor = floratus_sf,
site = park,
tau = 20,
cellsize = 2000,
plot = TRUE,
output_dir = "outputs/"
)
devtools::load_all(".")
data_flor = floratus_sf,
floratus
data_flor = floratus
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
floratus_sf <- sf::st_as_sf(floratus, coords = c("Long", "Lat"), crs = 4326)
result <- ignorance_map_mod(data_flor = floratus[1:50, ], site = park, tau = 20, cellsize = 2000)
sf::st_crs(floratus)
sf::st_crs(park)
plot(sf::st_geometry(park))
floratus <- sf::st_transform(floratus, 3035)
park <- sf::st_transform(park, 3035)
# Load your specific data objects
# data(floratus)
# data(park)
# data(unsuitablezone)
# Coerce to sf and SpatRaster as expected by the new function
park_sf <- sf::st_as_sf(park)
unsuitablezone_sf <- sf::st_as_sf(unsuitablezone)
# Ensure data_flor is a standard data.frame before passing to the function
data_flor <- as.data.frame(floratus)
result <- ignorance_map_mod(
data_flor = data_flor_dummy,
site = site_sf_dummy,
tau = 50,
cellsize = 1000, # 1 km resolution
CRS.new = 3035
)
result <- ignorance_map_mod(
data_flor = floratus,
site = park_sf,
tau = 50,
cellsize = 1000, # 1 km resolution
CRS.new = 3035
)
load("~/R projects/ignobioR/data/floratus.rda")
loratus
floratus
species_df <- read.csv("~/Progetti/MSRM/test ignobioR/prova-segnalaz-msrm.csv", header = TRUE)
head(species_df)
library(sf)
# Load the shapefile (replace path/to/data.shp with your file path)
species_sf <- st_read("~/Progetti/MSRM/test ignobioR/prova-segnalaz-msrm.shp")
head(species_df)
head(species_sf)
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 1000
)
library(sf)
# Load/create your species_sf object here...
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 1000
)
> species_sf <- st_read("~/Progetti/MSRM/test ignobioR/prova-segnalaz-msrm.shp")
species_sf <- st_read("~/Progetti/MSRM/test ignobioR/prova-segnalaz-msrm.shp")
head(species_sf)
# If you didn't do the combining step above:
names(species_sf)[names(species_sf) == "uncertaint"] <- "uncertainty"
head(species_sf)
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 1000
)
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 1000
)
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 2000
)
devtools::load_all(".")
devtools::load_all(".")
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 2000
)
species_sf <- st_read("~/Progetti/MSRM/test ignobioR/prova-segnalaz-msrm.shp")
library(sf)
species_sf <- st_read("~/Progetti/MSRM/test ignobioR/prova-segnalaz-msrm.shp")
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 2000
)
# If you didn't do the combining step above:
names(species_sf)[names(species_sf) == "uncertaint"] <- "uncertainty"
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 2000
)
devtools::load_all(".")
# If you didn't do the combining step above:
names(species_sf)[names(species_sf) == "uncertaint"] <- "uncertainty"
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 2000
)
devtools::load_all(".")
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 5000
)
devtools::load_all(".")
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 5000
)
devtools::load_all(".")
# If you didn't do the combining step above:
names(species_sf)[names(species_sf) == "uncertaint"] <- "uncertainty"
n_test_records <- 500
species_sf_subset <- species_sf[1:n_test_records, ]
mrfi_result <- ignorance_map_mod(
data_flor = species_sf_subset,
site = park_sf,
tau = 20,
cellsize = 5000
)
n_test_records <- 2000
species_sf_subset <- species_sf[1:n_test_records, ]
n_test_records <- 2000
species_sf_subset <- species_sf[1:n_test_records, ]
mrfi_result <- ignorance_map_mod(
data_flor = species_sf_subset,
site = park_sf,
tau = 20,
cellsize = 5000
)
devtools::load_all(".")
mrfi_result <- ignorance_map_mod(
data_flor = species_sf_subset,
site = park_sf,
tau = 20,
cellsize = 5000
)
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 2000
)
devtools::load_all(".")
mrfi_result <- ignorance_map_mod(
data_flor = species_sf_subset,
site = park_sf,
tau = 20,
cellsize = 5000
)
mrfi_result <- ignorance_map_mod(
data_flor = species_sf_subset,
site = park_sf,
tau = 20,
cellsize = 5000
)
devtools::load_all(".")
mrfi_result <- ignorance_map_mod(
data_flor = species_sf_subset,
site = park_sf,
tau = 20,
cellsize = 2000
)
mrfi_result <- ignorance_map_mod(
data_flor = species_sf_subset,
site = park_sf,
tau = 20,
cellsize = 2000
)
devtools::load_all(".")
mrfi_result <- ignorance_map_mod(
data_flor = species_sf_subset,
site = park_sf,
tau = 20,
cellsize = 2000
)
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 1000
)
mrfi_result <- ignorance_map_mod(
data_flor = species_sf,
site = park_sf,
tau = 20,
cellsize = 5000
)
mrfi_result <- ignorance_map_mod(
data_flor = species_sf_subset,
site = park_sf,
tau = 20,
cellsize = 1000
)
devtools::load_all(".")
mrfi_ext <- ignorance_map_mod(
data_flor = floratus,
excl_areas = unsuitablezone_sf,
site = park_sf,
tau = 20,
cellsize = 2000
)
mrfi_ext <- ignorance_map_mod(
data_flor = floratus,
excl_areas = unsuitablezone,
site = park,
tau = 20,
cellsize = 2000
)
mrfi_ext <- ignorance_map_mod(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 2000
)
mrfi_ext <- ignorance_map_mod(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 2000
)
devtools::load_all(".")
mrfi_ext <- ignorance_map_mod(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 2000
)
devtools::load_all(".")
mrfi_ext <- ignorance_map_mod(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 2000
)
mrfi_ext <- ignorance_map_mod(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 5000
)
devtools::load_all(".")
mrfi_ext <- ignorance_map_mod(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 5000
)
mrfi_ext <- ignorance_map_mod(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 1000
)
mrfi_ext <- ignorance_map_mod(
data_flor = floratus,
site = park,
tau = 20,
cellsize = 1000
)
devtools::load_all(".")
# Run both functions first
old <- ignorance_map(data_flor, site, tau = 20, cellsize = 2000)
# Run both functions first
old <- ignorance_map(floratuss, site, tau = 20, cellsize = 2000)
devtools::load_all(".")
# Run both functions first
old <- ignorance_map(floratuss, site, tau = 20, cellsize = 2000)
old <- ignorance_map(floratus, site, tau = 20, cellsize = 2000)
new <- ignorance_map_mod(floratus, site, tau = 20, cellsize = 2000)
old <- ignorance_map(data=floratus, site=park, tau = 20, cellsize = 2000)
new <- ignorance_map_mod(data=floratus, site=park, tau = 20, cellsize = 2000)
new <- ignorance_map_mod(data=floratus, site=park, tau = 20, cellsize = 5000)
new <- ignorance_map_mod(data=floratus, site=park, tau = 20, cellsize = 10000)
library(terra)
library(sf)
# site_proj: sf polygon in target CRS
# r_template: terra::rast template (same CRS, resolution)
site_vect <- terra::vect(site_proj)
devtools::load_all(".")
new <- ignorance_map_mod(data=floratus, site=park, tau = 20, cellsize = 2000)
new <- ignorance_map_mod(data=floratus, site=park, tau = 20, cellsize = 2000)
new <- ignorance_map_mod(data=floratus, site=park, tau = 20, cellsize = 5000)
new <- ignorance_map_mod(data=floratus, site=park, tau = 20, cellsize = 500)
library(terra)
site_vect <- vect("~/Progetti/MSRM/test ignobioR/prova-segnalaz-msrm.shp")
plot(site_vect)
remove(site_vect)
msrm_data <- vect("~/Progetti/MSRM/test ignobioR/prova-segnalaz-msrm.shp")
plot(msrm_data)
new <- ignorance_map_mod(data=msrm_data, site=park, tau = 20, cellsize = 2000)
names(msrm_data)[names(msrm_data) == "uncertaint"] <- "uncertainty"
new <- ignorance_map_mod(data=msrm_data, site=park, tau = 20, cellsize = 2000)
new <- ignorance_map_mod(data=msrm_data, site=park, tau = 20, cellsize = 1000)
library(terra); library(dplyr)
# assuming your modern output is mrfi_mod (list returned by ignorance_map_mod)
mrfi <- mrfi_mod$MRFI
new <- ignorance_map_mod(data=msrm_data, site=park, tau = 20, cellsize = 1000)
tsr_data <- vect("~/progetti/MSRM/GIS_OGU/TSR-borders.shp")
plot(msrm_data)
plot(tsr_borders)
plot(tsr_data)
new <- ignorance_map_mod(data=msrm_data, site=tsr_data, tau = 20, cellsize = 1000)
plot(tsr_borders)
plot(tsr_data)
tsr_data
new <- ignorance_map_mod(data=msrm_data, site=tsr_data, tau = 20, cellsize = 1000)
tsr_data <- terra::vect("~/progetti/MSRM/GIS_OGU/TSR-borders.shp")
tsr_data
plot(tsr_data)
tsr_data <- terra::vect("~/progetti/MSRM/GIS_OGU/TSR-borders.shp")
new <- ignorance_map_mod(data=msrm_data, site=tsr_data, tau = 20, cellsize = 1000)
tsr_data <- terra::vect("~/progetti/MSRM/GIS_OGU/TSR-borders.shp")
plot(tsr_data)
new <- ignorance_map_mod(data=msrm_data, site=tsr_data, tau = 20, cellsize = 1000)
library(sf) # Ensure sf is loaded
# Load the shapefile directly into an sf object
tsr_data <- sf::st_read("~/progetti/MSRM/GIS_OGU/TSR-borders.shp")
# Now run the function
new <- ignorance_map_mod(data=msrm_data, site=tsr_data, tau = 20, cellsize = 1000)
library(sf) # Ensure sf is loaded
# Load the shapefile directly into an sf object
tsr_data <- sf::st_read("~/progetti/MSRM/GIS_OGU/TSR-borders.shp")
# Now run the function
new <- ignorance_map_mod(data=floratus, site=tsr_data, tau = 20, cellsize = 1000)
PT_data <- sf::st_read("~/Progetti/MSRM/test ignobioR/segnalaz-PT.shp")
PT_borders <- sf::st_read("~/Progetti/MSRM/test ignobioR/comuni-PT.shp")
new <- ignorance_map_mod(data=PT-data, site=PT_borders, tau = 20, cellsize = 5000)
new <- ignorance_map_mod(data=PT_data, site=PT_borders, tau = 20, cellsize = 5000)
PT_data <- sf::st_read("~/Progetti/MSRM/test ignobioR/segnalaz-PT.shp")
names(PT_data)[names(PT_data) == "uncertaint"] <- "uncertainty"
new <- ignorance_map_mod(data=PT_data, site=PT_borders, tau = 20, cellsize = 5000)
new <- ignorance_map_mod(data=PT_data, site=PT_borders, tau = 20, cellsize = 1000)
